# Як зібрати станцію Arduino

[English](assembly.md)

| Крок                                                        | Ілюстрація                                                     |
|-------------------------------------------------------------|----------------------------------------------------------------|
| Припаяти виводи на лицевий бік Arduino Pro Mini             | <img src="images/01-arduino-header-pins.jpg" width="256"/>     |
| Прибрати індикатор живлення з Arduino Pro Mini              | <img src="images/07-cut-power-led-arduino.jpg" width="256"/>   |
| Припаяти виводи на лицевий бік RC522                        | <img src="images/02-rc522-header-pins.jpg" width="256"/>       |
| Прибрати світлодіод D1 з RC522                              | <img src="images/08-cut-off-led-rc522.jpg" width="256"/>       |
| Прибрати вивід USB, вимикач з джерела живлення 18650        | <img src="images/03-cut-off-usb.jpg" width="256"/>             |
| Припаяти виводи до виходу 3.3 В джерела живлення 18650      | <img src="images/04-power-header-pins.jpg" width="256"/>       |
| Припаяти індикатор заряду до полюсів 18650                  | <img src="images/05-charge-indicator.jpg" width="256"/>        |
| Припаяти конектор JST-2 для під’єднання батареї | <img src="images/06-solder-battery-connector.jpg" width="256"/>   |
| Розірвати ланцюг заряджання DS3231 щоб застосувати незаряджуваний елемент CR2032 | <img src="images/09-cut-clock-charging.jpg" width="256"/>  |
| Прибрати індикатор живлення з DS3231. Обережно, щоб не пошкодити доріжку від Bat+ до виходу 14 мікросхеми! | <img src="images/10-remove-clock-power-led.jpg" width="256"/>  |
| Підготувати макетну плату розміром приблизно 10x5 отворів   | <img src="images/11-prepare-perfboard.jpg" width="256"/>       |
| Підготувати необхідні деталі: світлодіод, активну пищалку на 3.3 В (5 В також підійде), 100Ω, 2 виводи 5x1 і один вивід 2x1  | <img src="images/12-prepare-parts.jpg" width="256"/>  |
| Припаяти деталі на макетну плату (схема нижче)              | <img src="images/13-solder-top.jpg" width="256"/><img src="images/13-solder-bottom.jpg" width="256"/>   |
| Встановити резервний елемент живлення CR2032 в модуль годинника | <img src="images/14-insert-clock-battery.jpg" width="256"/>    |
| З’єднати модулі проводами (схема нижче)                     | <img src="images/15-connect-wires.jpg" width="256"/>           |
| Підготувати для UART з’єднувач 6P Дюпон | <img src="images/15.5-uart-connector.jpg" width="256"/>           |
| Вивантажити програму і перевірити (процедура нижче)         |                                                                |

## Схема паяння

* Два виводи 5х1 для негативної і позитивної шини
* Світлодіод із зворотного боку з ближчого кінця, катодом до негативної шини
* Анод світлодіода до резистора 100Ω
* Інший кінець резистора до одного із сигнальних виводів
* Інший сигнальний вивід до позитивного терміналу пищалки
* Негативний термінал пищалки до негативної шини

## Схема підключення

* Годинник DS3231: SDA, SCL → A4, A5
* Зчитувач NFC RC522: SS, SCK, MOSI, MISO → 10, 13, 11, 12
* Світлодіод і пищалка: 4, 5
* Всі GND до негативної шини макетної плати чорними проводами
* Всі VCC 3.3 В до позитивної шини макетної плати червоними проводами
* Джерело живлення: GND → негативна шина, 3.3 В → позитивна шина

<img src="images/wiring.jpg" width="512"/>

Для вимкнення станції потрібно від’єднати провід від джерела живлення.

## Процедура тестування

* Синхронізувати годинник
* Сконфігурувати номер станції, код шифрування
* Поставити і перевірити відмітку в тестовій картці
* Вимкнути станцію (від’єднати від джерела живлення)
* Зачекати хвилину
* Увімкнути станцію
* Перевірити, чи годинник показує правильний час
* Поставити і перевірити відмітку в тестовій картці

## Монтування у корпус

| Крок                                                        | Ілюстрація                                                     |
|-------------------------------------------------------------|----------------------------------------------------------------|
| Просвердлити отвір для світлодіода (3 мм або 5 мм) | <img src="images/16-drill-hole.jpg" width="256"/>              |
| Просвердлити отвори для вимикача і гнізда заряджання. | <img src="images/17-dc-switch.jpg" width="256"/><br/> <img src="images/18-dc-switch-back.jpg" width="256"/> |
| Просвердлити і вирізати отвір для проводів індикатора | <img src="images/19-indicator-hole.jpg" width="256"/> |
| Вирізати отвір для конектора UART 6P Дюпон | <img src="images/20-uart-hole.jpg" width="256"/> |
| Припаяти проводи заряджання GND і 5.2 В, як на ілюстрації | <img src="images/21-dc-charger-wires.jpg" width="256"/> |
| Припаяти проводи до входу DC і перевірити | <img src="images/22-dc-charger-test.jpg" width="256"/> |
| Припаяти проводи з конектором до вимикача | <img src="images/23-switch-wires.jpg" width="256"/> |
| Під’єднати тимчасово акумулятор і проводи живлення, перевірити функціональність |     |
| Укріпити з’єднувачі Дюпон клеєм     | <img src="images/24-glue-connections.jpg" width="256"/> |
| Приклеїти зчитувачч і материнську плату, просадивши світлодіод у отвір | <img src="images/25-glue-nfc-mb.jpg" width="256"/> |
| Приклеїти годинник | <img src="images/26-glue-clock.jpg" width="256"/> |
| Приклеїти індикатор заряду акумулятора на зовнішню стінку | <img src="images/27-glue-indicator.jpg" width="256"/> |
| Приклеїти плату живлення | <img src="images/28-glue-power.jpg" width="256"/> |
| Під’єднати проводи живлення до материнської плати | <img src="images/29-connect-power.jpg" width="256"/> |
| Приклеїти контролер Arduino до бічної стінки | <img src="images/30-glue-arduino.jpg" width="256"/> |
| Встановити акумулятор від електронної цигарки у вільне місце (або вставити 18650 у тримач) | <img src="images/31-fit-battery.jpg" width="256"/> |
| Приклеїти з’єднувач UART на кришку біля щілини | <img src="images/32-glue-uart.jpg" width="256"/> |
| Закрити кришку і закріпити шурупами | <img src="images/33-fasten-lid.jpg" width="256"/> |
