# Журнал змін

В цьому файлі буде задокументовано всі помітні зміни в цьому проєкті.

Формат засновано на [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
і цей проєкт використовує [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Не випущено]

### Додано

- Службову картку для вибирання режиму: робочий, Bluetooth, WiFi
- Сервер Bluetooth для налаштування станції
- Сервер TCP (порт 23) через WiFi для налаштування
- Веб застосунок для конфігурування і поновлення мікропрограми
- Повідомлення останнього октету адреси IP азбукою Морзе
- Android: довге натиснення на селекторі фіксує функцію
- Android: виділення і копіювання відміток у буфер обміну
- Android: експортування й імпортування налаштувань

### Змінено

- Збирання мікропрограми з platformio
- Портовано застосунок Android на Jetpack Compose
- Arduino: друк байтів невідомої команди
- Android: видалено слово «бігуна» на кожній сторінці

### Видалено

- Відображення ключа в `info`
- Навігаційне меню із застосунку Android, натомість додано кнопки

## [2.0.0] - 2024.04.29

### Додано

- Безперервну інтеграцію в GitHub
- Веб-застосунок для тестування розміщення даних на картці (побудовано з дійсного коду з домогою emsdk)
- Автоматична поправка на літній час
- Перевірено програмування і конфігурування у Windows, додано інструкції
- Аргументи до sync-clock.py для зміни послідовного порту і виконання скрипту команд
- Модель станції в OpenSCAD і запропоновано кріплення

### Змінено

- **Нову структуру даних**, стійку до втрати інформації через невдалий запис деяких карток
- Використано зовнішній EEPROM AT24C32 на платі годинника DS3231
- Виправлено обчислення затримки в sync_clock.py, явне очікування на запрошення
- Виправлено розміщення на екрані додатку Android для менших екранів
- Зберігати вікно при обертанні екрана
- Виправлено місткість картки
- Виправлено крах, коли сміття в часовій відмітці
- Дозволено введення ключа шітснадцядковими цифрами нижнього регістру
- Не записувати дубльовану відмітку на станції

## [1.1.0] - 2024.02.24

### Додано

- Випробування попередніх ключів у Android для спрощення підготовки і скидання карток
- Блокування зміну адреси вивантаження для запобігання випадкового змінювання
- Підтвердження успішного запуску (OK = --- -.-)
- Встановлення дати і часу з допомогою таймштампу UNIX
- Період утримання журналу відміток (кількість днів)

### Змінено

- Виправлено вивантаження фінішного КП: вивантажувати не потрібно, номер має бути 900 в QuickEvent
- Виправлено стартовий час по *останній* відмітці старту
- Створено прототип корпусу з входом для заряджання, вимикачем і конектором для програматора
- Виправлено DNF, якщо немає відмітки про фініш (finishTime = 0xEEEE)
- Використання годинника Arduino для мілісекундної точності при синхронізації годинника

### Видалено

- Батарейки з BOM (може бути повторно використана з е-цигарок)
- Вимірювання часу з довільної точки, завжди з початку доби
- Засинання після періоду затишшя, потрібно користуватися кнопкою вимкнення

## [1.0] - 2024-01-27

### Додано

- Перші 10 прототипів з відкритим корпусом

[Не випущено]: https://github.com/sakhnik/arduin-o-punch/compare/v2.0.0...HEAD
[2.0.0]: https://github.com/sakhnik/arduin-o-punch/compare/v1.1.0...v2.0.0
[1.1.0]: https://github.com/sakhnik/arduin-o-punch/compare/v1.0...v1.1.0
[1.0]: https://github.com/sakhnik/arduin-o-punch/releases/tag/v1.0
